<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Restaurant Table Reservation</title>
  <link rel="stylesheet" href="styles.css">
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
  <div class="page">
    <form id="apptForm">
      <h2>Reserve Table</h2>
      <input type="text" name="name" placeholder="Name" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="text" name="phone" placeholder="Phone" required>
      <input type="number" name="number_of_guests" placeholder="Number of Guests" min="1" max="20" required>
      <input type="date" name="date" required>
      <input type="time" name="time" required>
      <textarea name="message" placeholder="Special Requests (optional)"></textarea>
      <button type="submit">Reserve Table</button>
    </form>
  </div>

  <script>
  // Submit reservation (simple form-only page)
  document.getElementById('apptForm').addEventListener('submit', async function(e){
    e.preventDefault();
    const form = e.target;
    const data = {
      name: form.name.value,
      email: form.email.value,
      phone: form.phone.value,
      number_of_guests: parseInt(form.number_of_guests.value),
      date: form.date.value,
      time: form.time.value,
      message: form.message.value
    };

    try {
      const res = await fetch('http://127.0.0.1:8000/reservations', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
      });
      if (res.ok) {
        const j = await res.json();
        if (j.status === 'success') {
          alert('Table reserved successfully!');
          form.reset();
        } else {
          alert('Error: ' + (j.detail || 'Unknown'));
        }
      } else {
        const text = await res.text();
        alert('Request failed: ' + text);
      }
    } catch (err) {
      alert('Network error: ' + err.message);
    }
  });
  </script>
</body>
</html>
